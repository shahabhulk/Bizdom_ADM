<?xml version="1.0" encoding="utf-8" ?>

<odoo>
    <!-- View for CRM Lead Question Line -->
    <record id="view_crm_lead_question_line_tree" model="ir.ui.view">
        <field name="name">fleet.lead.question.line.tree</field>
        <field name="model">fleet.lead.question.line</field>
        <field name="arch" type="xml">
            <list editable="bottom">
                <field name="question_id"/>
                <field name="answer" widget="radio" options="{'horizontal': true}"/>
                <field name="comment" placeholder="Add a comment..."/>
            </list>
        </field>
    </record>

    <!-- Form View Extension for CRM Lead -->
    <record id="view_crm_lead_form_inherit" model="ir.ui.view">
        <field name="name">crm.lead.form.inherit</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header">
                <button name="def_action_quality_lead" string="Quality Lead" type="object" class="oe_highlight"/>
                <button name="def_action_convert" string="Convert" type="object" class="oe_highlight"/>
                <button name="def_reset_new_lead" string="Reset" type="object" class="oe_highlight"/>
            </xpath>
            <!-- Modify statusbar to exclude duplicate "New Lead" stage -->
            <xpath expr="//field[@name='stage_id'][@widget='statusbar_duration']" position="attributes">
                <attribute name="statusbar_visible">New,Qualified,Proposition,Won</attribute>
            </xpath>
            <xpath expr="//field[@name='tag_ids']" position="after">
                <field name="vehicle_brand_id"/>
                <field name="vehicle_model_id"/>
            </xpath>
            <xpath expr="//field[@name='tag_ids']" position="before">
                <field name="source_id" />
                <field name="medium_id"/>
                <field name="lead_date"/>
            </xpath>
            <xpath expr="//notebook" position="before">
                <group string="Questions">
                    <field name="question_line_ids" widget="one2many_list" nolabel="1" options="{'no_create': True, 'no_open': True}">
                        <list editable="bottom" string="" create="0" delete="0">
                            <field name="question_id"/>
                            <field name="answer" widget="radio" options="{'horizontal': true}"/>
                            <field name="comment" placeholder="Add a comment..."/>
                        </list>
                    </field>
                </group>
            </xpath>
        </field>
    </record>

    <!-- List View Extension for CRM Lead -->
    <record id="view_crm_lead_tree_inherit" model="ir.ui.view">
        <field name="name">crm.lead.tree.inherit</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_tree_view_oppor"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='user_id']" position="after">
                <field name="vehicle_brand_id"/>
                <field name="vehicle_model_id"/>
            </xpath>
        </field>
    </record>


    <!-- Main Feedback Menu (parent) -->

      <record id="action_fleet_lead" model="ir.actions.act_window">
        <field name="name">Leads</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'active_test': False}</field>
    </record>

    <!-- Lead Menu -->
    <menuitem id="menu_fleet_lead_root" name="Marketing"
              parent="car_repair_industry.menu_main_car_repair" sequence="99"/>

    <menuitem id="menu_fleet_lead"
              name="Leads"
              parent="menu_fleet_lead_root"
              action="action_fleet_lead"
              sequence="11"/>




       <!-- List View for Lead Questions -->
    <record id="view_lead_question_tree" model="ir.ui.view">
        <field name="name">fleet.lead.question.tree</field>
        <field name="model">fleet.lead.question</field>
        <field name="arch" type="xml">
            <list>
                <field name="sequence" widget="handle"/>
                <field name="name"/>
                <field name="active" widget="boolean_toggle"/>
            </list>
        </field>
    </record>

    <!-- Form View for Lead Questions -->
    <record id="view_lead_question_form" model="ir.ui.view">
        <field name="name">fleet.lead.question.form</field>
        <field name="model">fleet.lead.question</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name" placeholder="Enter your question here..."/>
                            <group>
                                <field name="active"/>
                            </group>
                        </group>

                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Action for Lead Questions -->
    <record id="action_fleet_lead_question" model="ir.actions.act_window">
        <field name="name">Lead Questions</field>
        <field name="res_model">fleet.lead.question</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'active_test': False}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first lead question
            </p>
        </field>
    </record>

    <!-- Main Feedback Menu (parent) -->

    <!-- Lead Questions Menu -->
    <menuitem id="menu_fleet_lead_question"
              name="Lead Questions"
              parent="menu_fleet_lead_root"
              action="action_fleet_lead_question"
              sequence="100"/>
</odoo>